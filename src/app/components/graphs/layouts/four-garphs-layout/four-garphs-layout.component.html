<div class="container">
  <div class="row">
    <div class="column-graph" *ngIf="!isEditModes[0]">
        <button (click)="editGraph(0, false)">Edit</button>
      <div id="graph1" #plotlyGraph style="width:100%; height:100%; border:none;"></div>
    </div>
    <div class="column-edit-graph" *ngIf="isEditModes[0]">
      <mat-label>Dataset</mat-label>
      <mat-select [(ngModel)]="graphsData[0].dataset">
        <mat-option *ngFor="let dataset of datasets | keyvalue" [value]="dataset.key">{{ dataset.value }}</mat-option>
      </mat-select>
      <mat-label>Station</mat-label>
      <mat-select [(ngModel)]="graphsData[0].station" multiple [compareWith]="compareStations" (selectionChange)="onStationSelectionChange($event, 0)">
        <mat-option *ngFor="let station of graphs.stationsByDataset[graphsData[0].dataset] | keyvalue" [value]="station.value">{{ station.key }}</mat-option>
      </mat-select>
      <mat-label>Graph Type</mat-label>
      <mat-select [(ngModel)]="graphsData[0].graphType">
        <mat-option *ngFor="let type of graphTypes | keyvalue" [value]="type.key">{{ type.value }}</mat-option>
      </mat-select>
      <mat-label>Channel X</mat-label>
      <mat-select [(ngModel)]="graphsData[0].channelX">
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[0].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-label>Channels Y</mat-label>
      <mat-select [formControl]="selectedYChannels[0]" multiple>
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[0].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-checkbox [(ngModel)]="graphsData[0].cumulative">Cumulative Graph Data</mat-checkbox>
      <div class="time-pickers">
        <mat-label>Start Time</mat-label>
        <input matInput [matDatepicker]="startDatePicker" [(ngModel)]="graphsData[0].timeInterval.startTime">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-label>End Time</mat-label>
        <input matInput [matDatepicker]="endDatePicker" [(ngModel)]="graphsData[0].timeInterval.endTime">
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
      </div>
      <button (click)="editGraph(0, true)">Show graph</button>
    </div>
    <div class="column-graph" *ngIf="!isEditModes[1]">
      <button (click)="editGraph(1, false)">Edit</button>
      <div id="graph2" #plotlyGraph style="width:100%; height:100%; border:none;"></div>
    </div>
    <div class="column-edit-graph" *ngIf="isEditModes[1]">
      <mat-label>Dataset</mat-label>
      <mat-select [(ngModel)]="graphsData[1].dataset">
        <mat-option *ngFor="let dataset of datasets | keyvalue" [value]="dataset.key">{{ dataset.value }}</mat-option>
      </mat-select>
      <mat-label>Station</mat-label>
      <mat-select [(ngModel)]="graphsData[1].station" multiple [compareWith]="compareStations" (selectionChange)="onStationSelectionChange($event, 1)">
        <mat-option *ngFor="let station of graphs.stationsByDataset[graphsData[1].dataset] | keyvalue" [value]="station.value">{{ station.key }}</mat-option>
      </mat-select>
      <mat-label>Graph Type</mat-label>
      <mat-select [(ngModel)]="graphsData[1].graphType">
        <mat-option *ngFor="let type of graphTypes | keyvalue" [value]="type.key">{{ type.value }}</mat-option>
      </mat-select>
      <mat-label>Channel X</mat-label>
      <mat-select [(ngModel)]="graphsData[1].channelX">
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[1].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-label>Channels Y</mat-label>
      <mat-select [formControl]="selectedYChannels[1]" multiple>
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[1].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-checkbox [(ngModel)]="graphsData[1].cumulative">Cumulative Graph Data</mat-checkbox>
      <div class="time-pickers">
        <mat-label>Start Time</mat-label>
        <input matInput [matDatepicker]="startDatePicker" [(ngModel)]="graphsData[1].timeInterval.startTime">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-label>End Time</mat-label>
        <input matInput [matDatepicker]="endDatePicker" [(ngModel)]="graphsData[1].timeInterval.endTime">
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
      </div>
      <button (click)="editGraph(1, true)">Show graph</button>
    </div>
  </div>
  <div class="row">
    <div class="column-graph" *ngIf="!isEditModes[2]">
      <button (click)="editGraph(2, false)">Edit</button>
      <div id="graph3" #plotlyGraph style="width:100%; height:100%; border:none;"></div>
    </div>
    <div class="column-edit-graph" *ngIf="isEditModes[2]">
      <mat-label>Dataset</mat-label>
      <mat-select [(ngModel)]="graphsData[2].dataset">
        <mat-option *ngFor="let dataset of datasets | keyvalue" [value]="dataset.key">{{ dataset.value }}</mat-option>
      </mat-select>
      <mat-label>Station</mat-label>
      <mat-select [(ngModel)]="graphsData[2].station"  multiple [compareWith]="compareStations" (selectionChange)="onStationSelectionChange($event, 2)">
        <mat-option *ngFor="let station of graphs.stationsByDataset[graphsData[2].dataset] | keyvalue" [value]="station.value">{{ station.key }}</mat-option>
      </mat-select>
      <mat-label>Graph Type</mat-label>
      <mat-select [(ngModel)]="graphsData[2].graphType">
        <mat-option *ngFor="let type of graphTypes | keyvalue" [value]="type.key">{{ type.value }}</mat-option>
      </mat-select>
      <mat-label>Channel X</mat-label>
      <mat-select [(ngModel)]="graphsData[2].channelX">
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[2].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-label>Channels Y</mat-label>
      <mat-select [formControl]="selectedYChannels[2]" multiple>
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[2].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-checkbox [(ngModel)]="graphsData[2].cumulative">Cumulative Graph Data</mat-checkbox>
      <div class="time-pickers">
        <mat-label>Start Time</mat-label>
        <input matInput [matDatepicker]="startDatePicker" [(ngModel)]="graphsData[2].timeInterval.startTime">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-label>End Time</mat-label>
        <input matInput [matDatepicker]="endDatePicker" [(ngModel)]="graphsData[2].timeInterval.endTime">
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
      </div>
      <button (click)="editGraph(2, true)">Show graph</button>
    </div>
    <div class="column-graph" *ngIf="!isEditModes[3]">
      <button (click)="editGraph(3, false)">Edit</button>
      <div id="graph4" #plotlyGraph style="width:100%; height:100%; border:none;"></div>
    </div>
    <div class="column-edit-graph" *ngIf="isEditModes[3]">
      <mat-label>Dataset</mat-label>
      <mat-select [(ngModel)]="graphsData[3].dataset">
        <mat-option *ngFor="let dataset of datasets | keyvalue" [value]="dataset.key">{{ dataset.value }}</mat-option>
      </mat-select>
      <mat-label>Station</mat-label>
      <mat-select [(ngModel)]="graphsData[3].station"  multiple [compareWith]="compareStations" (selectionChange)="onStationSelectionChange($event, 3)">
        <mat-option *ngFor="let station of graphs.stationsByDataset[graphsData[3].dataset] | keyvalue" [value]="station.value">{{ station.key }}</mat-option>
      </mat-select>
      <mat-label>Graph Type</mat-label>
      <mat-select [(ngModel)]="graphsData[3].graphType">
        <mat-option *ngFor="let type of graphTypes | keyvalue" [value]="type.key">{{ type.value }}</mat-option>
      </mat-select>
      <mat-label>Channel X</mat-label>
      <mat-select [(ngModel)]="graphsData[3].channelX">
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[3].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-label>Channels Y</mat-label>
      <mat-select [formControl]="selectedYChannels[3]" multiple>
        <mat-option *ngFor="let channel of graphs.channelsByDataset[graphsData[3].dataset] | keyvalue" [value]="channel.key">{{ channel.value }}</mat-option>
      </mat-select>
      <mat-checkbox [(ngModel)]="graphsData[0].cumulative">Cumulative Graph Data</mat-checkbox>
      <div class="time-pickers">
        <mat-label>Start Time</mat-label>
        <input matInput [matDatepicker]="startDatePicker" [(ngModel)]="graphsData[3].timeInterval.startTime">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-label>End Time</mat-label>
        <input matInput [matDatepicker]="endDatePicker" [(ngModel)]="graphsData[3].timeInterval.endTime">
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
      </div>
      <button (click)="editGraph(3, true)">Show graph</button>
    </div>
  </div>
</div>
